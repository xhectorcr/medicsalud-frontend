<div class="app-container">
  <app-sidebarmedicos></app-sidebarmedicos>
  <main class="main-content">
    <div class="history-layout">
      <!-- Patients List Sidebar -->
      <aside class="patients-sidebar">
        <div class="sidebar-header">
          <h2>Pacientes</h2>
          <p>Selecciona un paciente</p>
          <div class="search-box">
            <i class="fas fa-search search-icon"></i>
            <input type="text" placeholder="Buscar paciente..." (input)="onSearch($event)" class="search-input">
          </div>
        </div>
        <div class="patients-list">
          <div *ngFor="let patient of filteredPatients" class="patient-card"
            [class.active]="selectedPatient?.id === patient.id" (click)="selectPatient(patient)">
            <img [src]="patient.image" [alt]="patient.nombre" class="patient-avatar">
            <div class="patient-info">
              <h3>{{ patient.nombre }}</h3>
              <p>{{ patient.genero }}, {{ patient.fechaNacimiento }}</p>
            </div>
          </div>
        </div>
      </aside>

      <!-- Patient Details -->
      <div class="patient-details" *ngIf="selectedPatient">
        <div class="header">
          <h1>Historia Clínica</h1>
          <p class="subtitle">Historial médico de {{ selectedPatient.nombre }}</p>
        </div>

        <div class="content-grid">
          <!-- Datos del Paciente -->
          <div class="section patient-data">
            <h2>Datos Personales</h2>
            <div class="data-grid">
              <div class="data-row">
                <span class="label">Nombre</span>
                <span class="value">{{ selectedPatient.nombre }}</span>
              </div>
              <div class="data-row">
                <span class="label">Fecha de Nacimiento</span>
                <span class="value">{{ selectedPatient.fechaNacimiento }}</span>
              </div>
              <div class="data-row">
                <span class="label">Género</span>
                <span class="value">{{ selectedPatient.genero }}</span>
              </div>
              <div class="data-row">
                <span class="label">Grupo Sanguíneo</span>
                <span class="value">{{ selectedPatient.grupoSanguineo }}</span>
              </div>
            </div>
          </div>

          <!-- Consultas Previas -->
          <div class="section previous-consults">
            <h2>Consultas Previas</h2>
            <div class="consult-list">
              <div class="consult-item" *ngFor="let consult of previousConsults">
                <div class="consult-bullet"></div>
                <div class="consult-content">
                  <div class="consult-type">{{ consult.tipo }}</div>
                  <div class="consult-date">{{ consult.fecha }}</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Antecedentes Médicos -->
        <div class="section medical-history" *ngIf="medicalHistory">
          <h2>Antecedentes Médicos</h2>
          <div class="history-grid">
            <div class="history-item">
              <span class="label">Alergias</span>
              <span class="value">{{ medicalHistory.alergias }}</span>
            </div>
            <div class="history-item">
              <span class="label">Enfermedades Crónicas</span>
              <span class="value">{{ medicalHistory.enfermedadesCronicas }}</span>
            </div>
            <div class="history-item">
              <span class="label">Cirugías Previas</span>
              <span class="value">{{ medicalHistory.cirugiasPrevias }}</span>
            </div>
          </div>
        </div>

        <!-- Diagnósticos y Tratamientos -->
        <div class="section diagnosis" *ngIf="diagnosis">
          <h2>Diagnósticos y Tratamientos</h2>
          <div class="diagnosis-grid">
            <div class="diagnosis-item">
              <span class="label">Diagnóstico Principal</span>
              <span class="value">{{ diagnosis.principal }}</span>
            </div>
            <div class="diagnosis-item">
              <span class="label">Tratamiento Actual</span>
              <span class="value">{{ diagnosis.tratamiento }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>